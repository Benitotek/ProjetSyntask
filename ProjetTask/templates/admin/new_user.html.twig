{% extends 'base.html.twig' %}

{% block title %}Ajouter un utilisateur - Administration{% endblock %}

{% block stylesheets %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('styles/new_user.css') }}">
{% endblock %}

{% block body %}
    <h1>Ajouter un utilisateur</h1>

    {{ form_start(form, {'action': path('app_user_new'), 'method': 'POST'}) }}

    <div class="form-group">
        {{ form_label(form.nom, 'Nom') }}
        {{ form_widget(form.nom) }}
        {{ form_errors(form.nom) }}
    </div>

    <div class="form-group">
        {{ form_label(form.prenom, 'Prénom') }}
        {{ form_widget(form.prenom) }}
        {{ form_errors(form.prenom) }}
    </div>

    <div class="form-group">
        {{ form_label(form.email, 'Email') }}
        {{ form_widget(form.email) }}
        {{ form_errors(form.email) }}
    </div>

    <!-- Champ mot de passe -->
    <div class="form-group">
        {{ form_label(form.mdp, 'Mot de passe') }}
        {{ form_widget(form.mdp) }}
        {{ form_errors(form.mdp) }}
    </div>

    <!-- Champ confirmation mot de passe -->
    <div class="form-group">
        {{ form_label(form.confirmer_mdp, 'Confirmer le mot de passe') }}
        {{ form_widget(form.confirmer_mdp) }}
        {{ form_errors(form.confirmer_mdp) }}
    </div>

    <div class="form-group">
        {{ form_label(form.role, 'Rôle') }}
        {{ form_widget(form.role) }}
        {{ form_errors(form.role) }}
    </div>

    <div class="form-group">
        {{ form_label(form.estActif, 'Actif') }}
        {{ form_widget(form.estActif) }}
        {{ form_errors(form.estActif) }}
    </div>

    <div class="form-actions">
        <button type="button" class="btn btn-secondary" onclick="history.back()">ANNULER</button>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Enregistrer
        </button>
    </div>

    {{ form_end(form) }}

{% endblock %}

{# {% extends 'base.html.twig' %}
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/styles/all.min.css" rel="stylesheet">
	<style></style>
</head>
{% block title %}Ajouter un utilisateur - Administration
{% endblock %}

{% block body %}
	<h1>Ajouter un utilisateur</h1>

	<form action="{{ path('app_admin_user_add') }}" method="POST">
		<div class="form-group">
			<label for="nom">Nom</label>
			<input type="text" id="nom" name="nom" required>
		</div>

		<div class="form-group">
			<label for="email">Email</label>
			<input type="email" id="email" name="email" required>
		</div> #}

		{# <div class="form-group">
			<label for="role">Rôle</label>
			<select id="role" name="role" required>
				<option value="">Sélectionner un rôle</option>
				<option value="Utilisateur">Utilisateur</option>
				<option value="Modérateur">Modérateur</option>
				<option value="Administrateur">Administrateur</option>
			</select>
		</div>
		<div class="form-group">
			<body>
				<div
					class="container">
					<!-- Sidebar -->
					<aside class="sidebar">
						<div class="logo-section">
							<div class="logo">
								<i class="fas fa-image"></i>
							</div>
							<p>Logo de l'application</p>
						</div>

						<div class="user-info">
							<div class="user-avatar">
								<i class="fas fa-user"></i>
							</div>
							<div class="user-details">
								<h3>{{ current_user.nom }}</h3>
								<div class="user-role">{{ current_user.role }}</div>
							</div>
						</div>

						<nav class="nav-menu">
							<div class="nav-item active">
								<i class="fas fa-chart-bar"></i>
								Tableaux de bord
							</div>
							<div class="nav-item">
								<i class="fas fa-folder"></i>
								Mes projects
							</div>
							<div class="nav-item">
								<i class="fas fa-chart-line"></i>
								Statistiques
							</div>
							<div class="nav-item">
								<i class="fas fa-user-circle"></i>
								Mon profil
							</div>
						</nav>

						<div class="logout-section">
							<a href="{{ path('app_admin_logout') }}" class="logout-btn">
								<i class="fas fa-sign-out-alt"></i>
								Déconnexion
							</a>
						</div>
					</aside>

					<!-- Main Content -->
					<main class="main-content">
						<div class="header">
							<h1>Gestion des utilisateurs</h1>
							<button class="add-user-btn" onclick="openModal()">
								<i class="fas fa-plus"></i>
								Ajouter un utilisateur
							</button>
						</div>

						<div class="users-section">
							<h2>Liste des utilisateurs</h2>

							<table class="users-table">
								<thead>
									<tr>
										<th>Utilisateur</th>
										<th>Email</th>
										<th>Rôle</th>
										<th>Statut</th>
									</tr>
								</thead>
								<tbody>
									{% for user in users %}
										<tr>
											<td>
												<div class="user-cell">
													<div class="user-avatar-small">
														<i class="fas fa-user"></i>
													</div>
													{{ user.nom }}
												</div>
											</td>
											<td>{{ user.email }}</td>
											<td>{{ user.role }}</td>
											<td>
												<span class="statut-badge {{ user.statut == 'Actif' ? 'statut-active' : 'statut-inactive' }}">
													{{ user.statut }}
												</span>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</main>
				</div> #}

				{# <!-- Modal Ajouter Utilisateur -->
				<div class="modal-overlay" id="addUserModal">
					<div class="modal">
						<h2>Ajouter un utilisateur</h2>
						<form action="{{ path('app_admin_user_add') }}" method="POST">
							<div class="form-group">
								<label for="nom">Nom</label>
								<input type="text" id="nom" name="nom" required>
							</div>

							<div class="form-group">
								<label for="email">Email</label>
								<input type="email" id="email" name="email" required>
							</div>

							<div class="form-group">
								<label for="role">Rôle</label>
								<select id="role" name="role" required>
									<option value="">Sélectionner un rôle</option>
									<option value="Utilisateur">Utilisateur</option>
									<option value="Modérateur">Modérateur</option>
									<option value="Administrateur">Administrateur</option>
								</select>
							</div>

							<div class="form-group">
								<div class="checkbox-group">
									<input type="checkbox" id="actif" name="actif" checked>
									<label for="actif">Actif</label>
								</div>
							</div>

							<div class="form-actions">
								<button type="button" class="btn btn-secondary" onclick="closeModal()">
									ANNULER
								</button>
								<button type="submit" class="btn btn-primary">
									<i class="fas fa-save"></i>
									Enregistrer
								</button>
							</div>
						</form>
					</div>
				</div>
			{% endblock %}

			<script>
				function openModal() {
document.getElementById('addUserModal').classList.add('active');
}

function closeModal() {
document.getElementById('addUserModal').classList.remove('active');
}

// Fermer le modal en cliquant sur l'overlay
document.getElementById('addUserModal').addEventListener('click', function (e) {
if (e.target === this) {
closeModal();
}
});

// Fermer le modal avec la touche Escape
document.addEventListener('keydown', function (e) {
if (e.key === 'Escape') {
closeModal();
}
});
			</script>
			{% extends 'base.html.twig' %}

			{% block title %}Ajouter un utilisateur - Administration
			{% endblock %}

			{% block body %}
				<h1>Ajouter un utilisateur</h1>

				<form action="{{ path('app_admin_user_add') }}" method="POST">
					<div class="form-group">
						<label for="nom">Nom</label>
						<input type="text" id="nom" name="nom" required>
					</div> #}
{# 
					<div class="form-group">
						<label for="email">Email</label>
						<input type="email" id="email" name="email" required>
					</div>

					<div class="form-group">
						<label for="role">Rôle</label>
						<select id="role" name="role" required>
							<option value="">Sélectionner un rôle</option>
							<option value="Utilisateur">Utilisateur</option>
							<option value="Modérateur">Modérateur</option>
							<option value="Administrateur">Administrateur</option>
						</select>
					</div>
					<div class="form-group">
						<div class="checkbox-group">
							<input type="checkbox" id="actif" name="actif" checked>
							<label for="actif">Actif</label>
						</div>
					</div>
					<div class="form-actions">
						<button type="button" class="btn btn-secondary" onclick="history.back()">
							ANNULER
						</button>
						<button type="submit" class="btn btn-primary">
							<i class="fas fa-save"></i>
							Enregistrer
						</button>
					</div>
				</form>
			{% endblock %}
		</body> #}
